# Generated by Chef, local modifications will be overwritten

[Main]
dd_url: <%= @dd_url %>
api_key: <%= @api_key %>
debug_mode: <%= node['mon-agent']['debug'] %>
check_freq: <%= node['mon-agent']['check_freq'] %>
hostname: <%= node.name %>
use_mount: <%= node['mon-agent']['use_mount'] ? "yes" : "no"  %>
listen_port: <%= node['mon-agent']['agent_port'] %>
tags: <%= node['mon-agent']['tags'] %>

<% if !node['mon-agent']['dogstreams'].empty? -%>
dogstreams: <%= node['mon-agent']['dogstreams'].join(', ') %>
<% end -%>

<% if node['mon-agent']['graphite'] -%>
graphite_listen_port: <%= node['mon-agent']['graphite_port'] %>
<% end -%>

<% if node['mon-agent']['dogstatsd'] -%>
# ========================================================================== #
# DogStatsd configuration                                                    #
# ========================================================================== #

# DogStatsd is a small server that aggregates your custom app metrics. For
# usage information, check out http://docs.datadoghq.com

#  Make sure your client is sending to the same port.
dogstatsd_port : <%= node['mon-agent']['dogstatsd_port'] %>

## The dogstatsd flush period.
dogstatsd_interval : <%= node['mon-agent']['dogstatsd_interval'] %>
<% end -%>

# ========================================================================== #
# Logging
# ========================================================================== #

log_level: INFO

# collector_log_file: /var/log/mon-agent/collector.log
# forwarder_log_file: /var/log/mon-agent/forwarder.log
# dogstatsd_log_file: /var/log/mon-agent/dogstatsd.log
# pup_log_file:       /var/log/mon-agent/pup.log

# if syslog is enabled but a host and port are not set, a local domain socket
# connection will be attempted
#
log_to_syslog: <%= node['mon-agent']['syslog']['active'] ? 'yes' : 'no' %>
<% if node['mon-agent']['syslog']['udp'] -%>
syslog_host: <%= node['mon-agent']['syslog']['host'] %>
syslog_port: <%= node['mon-agent']['syslog']['port'] %>
<% end -%>

# ========================================================================== #
# Mon-API Configuration
# ========================================================================== #

mon_api_region: <%= node['mon-agent']['mon_api_region'] %>
mon_api_project_id: <%= node['mon-agent']['mon_api_project_id'] %>
mon_api_username: <%= node['mon-agent']['mon_api_username'] %>
mon_api_password: <%= node['mon-agent']['mon_api_password'] %>
